<!DOCTYPE html>
<html>
 
  <head>
    <style type="text/css">
      .orange-text {
      color: orange;
    }

      html, body, #map-canvas { height: 80%; margin: 0; padding: 0;}
    </style>
    <div>
  <marquee><h2 class="orange-text">welcome to Hsin's map</h2></marquee>
</div>
    
<script src="https://www.gstatic.com/firebasejs/5.0.3/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCqLoRHFpLOWw5IRqyYC3jLKB7gY1wnA50",
    authDomain: "hsin-204707.firebaseapp.com",
    databaseURL: "https://hsin-204707.firebaseio.com",
    projectId: "hsin-204707",
    storageBucket: "hsin-204707.appspot.com",
    messagingSenderId: "32509099489"
  };
  firebase.initializeApp(config);
</script>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDcXuXB9-1cpWE6KW_J3Ha1e5pVogx9uPU">
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: { lat: -34.397, lng: 150.644},
          zoom: 8
        };
        var map = new google.maps.Map(
            document.getElementById('map-canvas'),
            mapOptions);
      }
      google.maps.event.addDomListener(
          window, 'load', initialize);
    </script>
  </head>
  <body>
<div id="map-canvas"></div>
    var account = document.getElementById("account");
var pwd = document.getElementById("pwd");
var registerSmtBtn = document.getElementById("registerSmtBtn");
registerSmtBtn.addEventListener("click", function(){
        console.log(account.value);
    firebase.auth().createUserWithEmailAndPassword(account.value, pwd.value).catch(function(error) {
    // Handle Errors here.

    var errorCode = error.code;
    var errorMsg = error.message;
    console.log(errorMsg);
  });
},false);
    var userLogin;
firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    userLogin = user;
    console.log("User is logined", user)
  } else {
    userLogin = null;
    console.log("User is not logined yet.");
  }
});
    var signoutSmtBtn = document.getElementById("signoutSmtBtn");
signoutSmtBtn.addEventListener("click",function(){
    firebase.auth().signOut().then(function() {
        console.log("User sign out!");
    }, function(error) {
    console.log("User sign out error!");
    })
},false);
    var verifyBtn = document.getElementById("verifyBtn");
verifyBtn.addEventListener("click",function(){
  userLogin.sendEmailVerification().then(function() {
    console.log("驗證信寄出");
  }, function(error) {
    console.error("驗證信錯誤");
  });
},false);

//更改密碼

var chgPwd = document.getElementById("chgPwd");
var chgPwdBtn = document.getElementById("chgPwdBtn");
chgPwdBtn.addEventListener("click",function(){
    firebase.auth().sendPasswordResetEmail(chgPwd.value).then(function() {
    // Email sent.

    console.log("更改密碼Email已發送");
    chgPwd.value = "";
  }, function(error) {
    // An error happened.

    console.error("更改密碼",error);
  });
},false);
    const credential = firebase.auth.EmailAuthProvider.credential(user.auth.email, password);
 user.auth.reauthenticate(credential).then(() => {
     user.auth.delete();
 });
  </body>
</html>
